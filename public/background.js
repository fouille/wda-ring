import{app}from"./ring";let url;const ringStorage=(e,a)=>{switch(e){case"set":localStorage.setItem("ring",a);break;case"delete":localStorage.removeItem("ring")}return localStorage.getItem("ring")},setRing=e=>{app.configureSounds({ring:e})},handleRing=e=>{const a=e.data;if("original"===a)app.resetSounds(),ringStorage("delete");else{const e=`${url}/sounds/${a}`;ringStorage("set",e),setRing(e)}};app.onBackgroundMessage=e=>{switch(e.value){case"ring":handleRing(e);break;case"config":const a=ringStorage();app.sendMessageToIframe({value:"config",ring:a})}},(async()=>{await app.initialize();const e=app.getContext();url=e.app.extra.baseUrl;const a=ringStorage();a&&setRing(a),console.log("ring background - background launched")})();